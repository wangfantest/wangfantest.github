I"<p>今天在为CTreeCtrl中的项目添加图标的时候
用到了如下代码</p>
<pre><code class="language-C">CImageList m_ICO;
m_ICO.Create(16,16,ILC_COLOR24,2,0);
m_ICO.Add(AfxGetApp()-&gt;LoadIcon(IDI_ICON1));
m_ICO.Add(AfxGetApp()-&gt;LoadIcon(IDI_ICON2));
m_Tree.SetImageList(&amp;m_ICO,TVSIL_NORMAL);
m_Tree.SetItemImage(ControlID, 0, 1);
</code></pre>
<p>调试了很久,查看函数的返回值也完全正确！！！然而就是不显示图片…
最后才发现原来CImageList这个局部变量应该设置为对象内部变量或者全局变量.
设置成局部变量的话图片就被释放掉了,我终于知道C语言为什么这么难用了……
<img src="/assets/img/坑爹.gif" alt="坑爹" /></p>
:ET